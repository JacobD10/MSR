<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of createSetup</title>
  <meta name="keywords" content="createSetup">
  <meta name="description" content="CREATESETUP Summary of this function goes here">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html v1.5 &copy; 2003-2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../m2html.css">
</head>
<body>
<a name="_top"></a>
<div><a href="../index.html">Home</a> &gt;  <a href="index.html">+Speaker_Setup</a> &gt; createSetup.m</div>

<!--<table width="100%"><tr><td align="left"><a href="../index.html"><img alt="<" border="0" src="../left.png">&nbsp;Master index</a></td>
<td align="right"><a href="index.html">Index for +Speaker_Setup&nbsp;<img alt=">" border="0" src="../right.png"></a></td></tr></table>-->

<h1>createSetup
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="box"><strong>CREATESETUP Summary of this function goes here</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="box"><strong>function [ setup ] = createSetup( settings ) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="fragment"><pre class="comment">CREATESETUP Summary of this function goes here
   Detailed explanation goes here</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../matlabicon.gif)">
</ul>
This function is called by:
<ul style="list-style-image:url(../matlabicon.gif)">
</ul>
<!-- crossreference -->

<h2><a name="_subfunctions"></a>SUBFUNCTIONS <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<ul style="list-style-image:url(../matlabicon.gif)">
<li><a href="#_sub1" class="code">function setup = MultizoneSoundfieldSetup(</a></li></ul>

<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function [ setup ] = createSetup( settings )</a>
0002 <span class="comment">%CREATESETUP Summary of this function goes here</span>
0003 <span class="comment">%   Detailed explanation goes here</span>
0004 p = inputParser;
0005 p.CaseSensitive = false;
0006 
0007 addOptional(p,<span class="string">'resolution'</span>,                     100,               @isnumeric); <span class="comment">% 1</span>
0008 addOptional(p,<span class="string">'frequency'</span>,                      2000,              @isnumeric); <span class="comment">% 2</span>
0009 addOptional(p,<span class="string">'reproduction_radius'</span>,            1.0,               @isnumeric); <span class="comment">% 3</span>
0010 addOptional(p,<span class="string">'reproduction_geometry'</span>,          <span class="string">'circle'</span>,          @ischar);    <span class="comment">% 4</span>
0011 addOptional(p,<span class="string">'reproduction_size'</span>,              [],                @isnumeric); <span class="comment">% 5</span>
0012 addOptional(p,<span class="string">'numberof_basisplanewaves'</span>,       -1,                @isnumeric); <span class="comment">% 6</span>
0013 addOptional(p,<span class="string">'bright_weight'</span>,                  1.0,               @isnumeric); <span class="comment">% 7</span>
0014 addOptional(p,<span class="string">'quiet_weight'</span>,                   2.5,               @isnumeric); <span class="comment">% 8</span>
0015 addOptional(p,<span class="string">'unattended_weight'</span>,              0.05,              @isnumeric); <span class="comment">% 9</span>
0016 addOptional(p,<span class="string">'brightzone_radius'</span>,              0.3,               @isnumeric); <span class="comment">% 10</span>
0017 addOptional(p,<span class="string">'brightzone_pos_angle'</span>,           180,               @isnumeric); <span class="comment">% 11</span>
0018 addOptional(p,<span class="string">'brightzone_pos_distance'</span>,        0.6,               @isnumeric); <span class="comment">% 12</span>
0019 addOptional(p,<span class="string">'brightzone_geometry'</span>,            <span class="string">'circle'</span>,          @ischar);    <span class="comment">% 13</span>
0020 addOptional(p,<span class="string">'brightzone_size'</span>,                [],                @isnumeric); <span class="comment">% 14</span>
0021 addOptional(p,<span class="string">'brightzone_source_angle'</span>,        15,                @isnumeric); <span class="comment">% 15</span>
0022 addOptional(p,<span class="string">'brightzone_source_dist'</span>,         1.0,               @isnumeric); <span class="comment">% 16</span>
0023 addOptional(p,<span class="string">'brightzone_source_type'</span>,         <span class="string">'pw'</span>,              @ischar);    <span class="comment">% 17</span>
0024 addOptional(p,<span class="string">'quietzone_radius'</span>,               0.3,               @isnumeric); <span class="comment">% 18</span>
0025 addOptional(p,<span class="string">'quietzone_pos_angle'</span>,            0,                 @isnumeric); <span class="comment">% 19</span>
0026 addOptional(p,<span class="string">'quietzone_pos_distance'</span>,         0.6,               @isnumeric); <span class="comment">% 20</span>
0027 addOptional(p,<span class="string">'quietzone_geometry'</span>,             <span class="string">'circle'</span>,          @ischar);    <span class="comment">% 21</span>
0028 addOptional(p,<span class="string">'quietzone_size'</span>,                 [],                @isnumeric); <span class="comment">% 22</span>
0029 addOptional(p,<span class="string">'numberof_loudspeakers'</span>,          -1,                @isnumeric); <span class="comment">% 23</span>
0030 addOptional(p,<span class="string">'loudspeaker_radius'</span>,             1.5,               @isnumeric); <span class="comment">% 24</span>
0031 addOptional(p,<span class="string">'maximum_frequency'</span>,              8000,              @isnumeric); <span class="comment">% 25</span>
0032 addOptional(p,<span class="string">'angleto_firstloudspeaker'</span>,       90,                @isnumeric); <span class="comment">% 26</span>
0033 addOptional(p,<span class="string">'angleof_loudspeakerarc'</span>,         180,               @isnumeric); <span class="comment">% 27</span>
0034 addOptional(p,<span class="string">'loudspeaker_model'</span>,              <span class="string">'Genelec 8010A'</span>,   @ischar);    <span class="comment">% 28</span>
0035 addOptional(p,<span class="string">'loudspeaker_object'</span>,             [] );                           <span class="comment">% 29</span>
0036 addOptional(p,<span class="string">'angleof_loudspeakerarrcentre'</span>,   180,               @isnumeric); <span class="comment">% 30</span>
0037 addOptional(p,<span class="string">'loudspeaker_spacing'</span>,            0.01,              @isnumeric); <span class="comment">% 31</span>
0038 addOptional(p,<span class="string">'speaker_array_type'</span>,             <span class="string">'circle'</span>,          @ischar);    <span class="comment">% 32</span>
0039 addOptional(p,<span class="string">'room_size'</span>,                      [],                @isnumeric); <span class="comment">% 33</span>
0040 addOptional(p,<span class="string">'dimensionality'</span>,                 2,                 @isnumeric); <span class="comment">% 34</span>
0041 parse(p, settings{:});
0042 
0043 setup = <a href="#_sub1" class="code" title="subfunction setup = MultizoneSoundfieldSetup( ">MultizoneSoundfieldSetup</a>( <span class="keyword">...</span><span class="comment">       </span>
0044     p.Results.resolution, <span class="keyword">...</span><span class="comment">                   1</span>
0045     p.Results.frequency, <span class="keyword">...</span><span class="comment">                    2</span>
0046     p.Results.reproduction_radius, <span class="keyword">...</span><span class="comment">          3</span>
0047     p.Results.reproduction_geometry, <span class="keyword">...</span><span class="comment">        4</span>
0048     p.Results.reproduction_size, <span class="keyword">...</span><span class="comment">            5</span>
0049     p.Results.numberof_basisplanewaves, <span class="keyword">...</span><span class="comment">     6</span>
0050     p.Results.bright_weight, <span class="keyword">...</span><span class="comment">                7</span>
0051     p.Results.quiet_weight, <span class="keyword">...</span><span class="comment">                 8</span>
0052     p.Results.unattended_weight, <span class="keyword">...</span><span class="comment">            9</span>
0053     p.Results.brightzone_radius, <span class="keyword">...</span><span class="comment">            10</span>
0054     p.Results.brightzone_pos_angle, <span class="keyword">...</span><span class="comment">         11</span>
0055     p.Results.brightzone_pos_distance, <span class="keyword">...</span><span class="comment">      12</span>
0056     p.Results.brightzone_geometry, <span class="keyword">...</span><span class="comment">          13</span>
0057     p.Results.brightzone_size, <span class="keyword">...</span><span class="comment">              14</span>
0058     p.Results.brightzone_source_angle, <span class="keyword">...</span><span class="comment">      15</span>
0059     p.Results.brightzone_source_dist, <span class="keyword">...</span><span class="comment">       16</span>
0060     p.Results.brightzone_source_type, <span class="keyword">...</span><span class="comment">       17</span>
0061     p.Results.quietzone_radius, <span class="keyword">...</span><span class="comment">             18</span>
0062     p.Results.quietzone_pos_angle, <span class="keyword">...</span><span class="comment">          19</span>
0063     p.Results.quietzone_pos_distance, <span class="keyword">...</span><span class="comment">       20</span>
0064     p.Results.quietzone_geometry, <span class="keyword">...</span><span class="comment">           21</span>
0065     p.Results.quietzone_size, <span class="keyword">...</span><span class="comment">               22</span>
0066     p.Results.numberof_loudspeakers, <span class="keyword">...</span><span class="comment">        23</span>
0067     p.Results.loudspeaker_radius, <span class="keyword">...</span><span class="comment">           24</span>
0068     p.Results.maximum_frequency, <span class="keyword">...</span><span class="comment">            25</span>
0069     p.Results.angleto_firstloudspeaker, <span class="keyword">...</span><span class="comment">     26</span>
0070     p.Results.angleof_loudspeakerarc, <span class="keyword">...</span><span class="comment">       27</span>
0071     p.Results.loudspeaker_model, <span class="keyword">...</span><span class="comment">            28</span>
0072     p.Results.loudspeaker_object, <span class="keyword">...</span><span class="comment">           29</span>
0073     p.Results.angleof_loudspeakerarrcentre, <span class="keyword">...</span><span class="comment"> 30</span>
0074     p.Results.loudspeaker_spacing, <span class="keyword">...</span><span class="comment">          31</span>
0075     p.Results.speaker_array_type, <span class="keyword">...</span><span class="comment">           32</span>
0076     p.Results.room_size, <span class="keyword">...</span><span class="comment">                    33</span>
0077     p.Results.dimensionality);<span class="comment">%                 34</span>
0078 
0079 <span class="keyword">end</span>
0080 
0081 <a name="_sub1" href="#_subfunctions" class="code">function setup = MultizoneSoundfieldSetup( </a><span class="keyword">...</span>
0082     res, <span class="keyword">...</span><span class="comment">     1</span>
0083     f,<span class="keyword">...</span><span class="comment">        2</span>
0084     R,<span class="keyword">...</span><span class="comment">        3</span>
0085     reprGeom,<span class="keyword">...</span><span class="comment"> 4</span>
0086     reprSize,<span class="keyword">...</span><span class="comment"> 5</span>
0087     N,<span class="keyword">...</span><span class="comment">        6</span>
0088     Wb,<span class="keyword">...</span><span class="comment">       7</span>
0089     Wq,<span class="keyword">...</span><span class="comment">       8</span>
0090     Wu,<span class="keyword">...</span><span class="comment">       9</span>
0091     rb,<span class="keyword">...</span><span class="comment">       10</span>
0092     angb,<span class="keyword">...</span><span class="comment">     11</span>
0093     disb,<span class="keyword">...</span><span class="comment">     12</span>
0094     zoGeomb,<span class="keyword">...</span><span class="comment">  13</span>
0095     zoSizeb,<span class="keyword">...</span><span class="comment">  14</span>
0096     srcangb,<span class="keyword">...</span><span class="comment">  15</span>
0097     srcdistb,<span class="keyword">...</span><span class="comment"> 16</span>
0098     srctypeb,<span class="keyword">...</span><span class="comment"> 17</span>
0099     rq,<span class="keyword">...</span><span class="comment">       18</span>
0100     angq,<span class="keyword">...</span><span class="comment">     19</span>
0101     disq,<span class="keyword">...</span><span class="comment">     20</span>
0102     zoGeomq,<span class="keyword">...</span><span class="comment">  21</span>
0103     zoSizeq,<span class="keyword">...</span><span class="comment">  22</span>
0104     L,<span class="keyword">...</span><span class="comment">        23</span>
0105     Rl,<span class="keyword">...</span><span class="comment">       24</span>
0106     fmax,<span class="keyword">...</span><span class="comment">     25</span>
0107     phi,<span class="keyword">...</span><span class="comment">      26</span>
0108     phiL,<span class="keyword">...</span><span class="comment">     27</span>
0109     spkrmod,<span class="keyword">...</span><span class="comment">  28</span>
0110     spkrobj,<span class="keyword">...</span><span class="comment">  29</span>
0111     phiLcent,<span class="keyword">...</span><span class="comment"> 30</span>
0112     spkrspace,<span class="keyword">...</span><span class="comment">31</span>
0113     arr_type,<span class="keyword">...</span><span class="comment"> 32</span>
0114     roomSz,<span class="keyword">...</span><span class="comment">   33</span>
0115     dims)<span class="comment">%       34</span>
0116 <span class="comment">%%</span>
0117 c = 343;
0118 k = (f/c)*2*pi;
0119 M = ceil(k*R);
0120 kmax = (fmax/c)*2*pi;
0121 Mmax = ceil(kmax*R);
0122 
0123 <span class="comment">%%</span>
0124 quiet  = Orthogonal_Basis_Expansion.spatial_zone(f, 0, rq, <span class="string">'quiet'</span>);
0125 bright = Orthogonal_Basis_Expansion.spatial_zone(f, 0, rb, srctypeb, 1.0, srcangb, srcdistb);
0126 quiet.res  = res;
0127 bright.res = quiet.res;
0128 quiet.Dimensionality  = dims;
0129 bright.Dimensionality = dims;
0130 quiet.ZoneGeometry  = zoGeomq;
0131 bright.ZoneGeometry = zoGeomb;
0132 quiet  =  quiet.setZoneSize( zoSizeq );
0133 bright = bright.setZoneSize( zoSizeb );
0134 quiet  =  quiet.setDesiredSoundfield(true, <span class="string">'suppress_output'</span>);
0135 bright = bright.setDesiredSoundfield(true, <span class="string">'suppress_output'</span>);
0136 
0137 <span class="comment">%%</span>
0138 soundfield = Orthogonal_Basis_Expansion.multizone_soundfield_OBE;
0139 soundfield = soundfield.addSpatialZone(quiet,  disq, angq);
0140 soundfield = soundfield.addSpatialZone(bright, disb, angb);
0141 soundfield.Dimensionality = dims;
0142 soundfield.Geometry  = reprGeom;
0143 soundfield = soundfield.setReproRegionSize( reprSize );
0144 soundfield.Radius = R;
0145 
0146 soundfield.BrightZ_Weight     = Wb;
0147 soundfield.QuietZ_Weight      = Wq;
0148 soundfield.UnattendedZ_Weight = Wu;
0149 
0150 <span class="keyword">if</span> N &lt; 1
0151     N = 2*M + 1;
0152 <span class="keyword">end</span>
0153 soundfield = soundfield.setN( floor(N) );
0154 
0155 <span class="comment">%%</span>
0156 setup = Speaker_Setup.loudspeaker_setup;
0157 setup.Dimensionality = dims;
0158 setup = setup.setRoomSize(roomSz);
0159 setup = setup.addMultizone_Soundfield(soundfield);
0160 setup = setup.setRadius( Rl );
0161 
0162 setup.Speaker_Arc_Angle = phiL;
0163 setup.Angle_FirstSpeaker = phi;
0164 
0165 <span class="keyword">if</span> L &lt; 1
0166     L = ceil( setup.Speaker_Arc_Angle/360 * 2*Mmax + 1 );
0167 <span class="keyword">end</span>
0168 setup.Loudspeaker_Count = floor(L);
0169 
0170 setup = setup.addLoudspeaker_Object(spkrobj);
0171 setup = setup.setLoudspeakerType(spkrmod);
0172 setup.Speaker_Array_Type = arr_type;
0173 setup.Speaker_Array_Centre = phiLcent;
0174 setup.Speaker_Spacing = spkrspace;
0175 <span class="keyword">if</span> ~isempty(phiLcent) &amp;&amp; ~isempty(spkrspace)
0176     <span class="keyword">if</span> ~isnan(phiLcent) &amp;&amp; ~isnan(spkrspace)
0177         setup = setup.setLoudspeakerSpacing();
0178     <span class="keyword">end</span>
0179 <span class="keyword">end</span>
0180 
0181 setup = setup.calc_Loudspeaker_Locations;
0182 <span class="keyword">end</span></pre></div>
<hr><address>Generated on Sun 09-Jul-2017 20:35:18 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" title="Matlab Documentation in HTML">m2html</a></strong> &copy; 2005</address>
</body>
</html>